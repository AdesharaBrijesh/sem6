<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country-State-City Dropdown</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h2>Select Your Location</h2>
        <form>
            <label for="country">Country:</label>
            <select id="country" name="country">
                <option value="">Select Country</option>
            </select>

            <label for="state">State:</label>
            <select id="state" name="state">
                <option value="">Select State</option>
            </select>

            <label for="city">City:</label>
            <select id="city" name="city">
                <option value="">Select City</option>
            </select>
        </form>

        <div id="selectedLocation"></div> <!-- Empty div to display selected location -->
    </div>

    <script>
        $(document).ready(function(){
            // Load countries
            $.ajax({
                url: 'get_data.php',
                type: 'GET',
                data: {type: 'country'},
                success: function(response){
                    $('#country').append(response);
                }
            });

            // Load states when a country is selected
            $('#country').change(function(){
                var countryID = $(this).val();
                $('#state').html('<option value="">Select State</option>');
                $('#city').html('<option value="">Select City</option>');

                if(countryID){
                    $.ajax({
                        url: 'get_data.php',
                        type: 'GET',
                        data: {type: 'state', country_id: countryID},
                        success: function(response){
                            $('#state').append(response);
                        }
                    });
                }
            });

            // Load cities when a state is selected
            $('#state').change(function(){
                var stateID = $(this).val();
                $('#city').html('<option value="">Select City</option>');

                if(stateID){
                    $.ajax({
                        url: 'get_data.php',
                        type: 'GET',
                        data: {type: 'city', state_id: stateID},
                        success: function(response){
                            $('#city').append(response);
                        }
                    });
                }
            });

            // Display selected location
            $('select').change(function(){
                var country = $('#country option:selected').text();
                var state = $('#state option:selected').text();
                var city = $('#city option:selected').text();
                $('#selectedLocation').html('<p>Location: ' + country + ', ' + state + ', ' + city + '</p>');
            });
        });
    </script>
</body>
</html>
